<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0045)http://www-scf.usc.edu/~flv/ipbook/chap09.htm -->
<HTML><HEAD><TITLE>第9章 图象的压缩编码，JPEG压缩编码标准</TITLE>
<META http-equiv=Content-Type content="text/html; charset=GB2312"><LINK 
href="./chap09.files/editdata.mso" rel=Edit-Time-Data>
<STYLE>.Normal {
	TEXT-JUSTIFY: inter-ideograph; FONT-SIZE: 10.5pt; TEXT-INDENT: 0pt; LINE-HEIGHT: normal; FONT-FAMILY: "Times New Roman"; TEXT-ALIGN: justify
}
.MsoBodyText {
	TEXT-JUSTIFY: inter-ideograph; FONT-SIZE: 12pt; TEXT-INDENT: 24.95pt; LINE-HEIGHT: 20pt; FONT-FAMILY: "Times New Roman"; TEXT-ALIGN: justify
}
.MsoBodyTextFirstIndent {
	TEXT-JUSTIFY: inter-ideograph; FONT-SIZE: 12pt; TEXT-INDENT: 21pt; LINE-HEIGHT: 20pt; FONT-FAMILY: "Times New Roman"; TEXT-ALIGN: justify
}
.a {
	FONT-SIZE: 12pt; TEXT-INDENT: 0pt; LINE-HEIGHT: 20pt; FONT-FAMILY: "Times New Roman"; TEXT-ALIGN: center
}
</STYLE>

<META content="MSHTML 6.00.2800.1400" name=GENERATOR></HEAD>
<BODY class=Normal lang=ZH-CN vLink=purple link=blue bgColor=#ffffff>
<DIV style="LAYOUT-GRID:  15.6pt none">
<H1><A name=_Toc486331907></A><A name=_Toc486332907></A><A 
name=_Toc486339016></A><A name=_Toc454810881></A><A 
name=_Toc454856655><SPAN><SPAN>第<SPAN 
lang=EN-US>9</SPAN></SPAN></SPAN></A><SPAN><SPAN><SPAN 
style="FONT-FAMILY: 黑体">章</SPAN> </SPAN></SPAN><SPAN><SPAN><SPAN 
style="FONT-FAMILY: 黑体">图象的压缩编码，</SPAN><SPAN 
lang=EN-US>JPEG</SPAN></SPAN></SPAN><SPAN><SPAN><SPAN 
style="FONT-FAMILY: 黑体">压缩编码标准</SPAN></SPAN></SPAN></H1>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">在介绍图象的压缩编码之前，先考虑一个问题：为什么要压缩？其实这个问题不用我回答，你也能想得到。因为图象信息的数据量实在是太惊人了。举一个例子就明白：一张</SPAN><SPAN 
lang=EN-US>A4(210mm×297mm) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">幅面的照片，若用中等分辨率</SPAN><SPAN 
lang=EN-US>(300dpi)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的扫描仪按真彩色扫描，其数据量为多少？让我们来计算一下：共有</SPAN><SPAN 
lang=EN-US>(300×210/25.4) ×(300×297/25.4)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个象素，每个象素占</SPAN><SPAN lang=EN-US>3</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个字节，其数据量为</SPAN><SPAN lang=EN-US>26M</SPAN><SPAN 
style="FONT-FAMILY: 宋体">字节，其数据量之大可见一斑了。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">如今在</SPAN><SPAN 
lang=EN-US>Internet</SPAN><SPAN 
style="FONT-FAMILY: 宋体">上，传统基于字符界面的应用逐渐被能够浏览图象信息的</SPAN><SPAN 
lang=EN-US>WWW(World Wide Web)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">方式所取代。</SPAN><SPAN lang=EN-US>WWW</SPAN><SPAN 
style="FONT-FAMILY: 宋体">尽管漂亮，但是也带来了一个问题：图象信息的数据量太大了，本来就已经非常紧张的网络带宽变得更加不堪重负，使得</SPAN><SPAN 
lang=EN-US>World Wide Web</SPAN><SPAN style="FONT-FAMILY: 宋体">变成了</SPAN><SPAN 
lang=EN-US>World Wide Wait</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">总之，大数据量的图象信息会给存储器的存储容量，通信干线信道的带宽，以及计算机的处理速度增加极大的压力。单纯靠增加存储器容量，提高信道带宽以及计算机的处理速度等方法来解决这个问题是不现实的，这时就要考虑压缩。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">压缩的理论基础是信息论。从信息论的角度来看，压缩就是去掉信息中的冗余，即保留不确定的信息，去掉确定的信息</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">可推知的</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，也就是用一种更接近信息本质的描述来代替原有冗余的描述。这个本质的东西就是信息量</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">即不确定因素</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">压缩可分为两大类：第一类压缩过程是可逆的，也就是说，从压缩后的图象能够完全恢复出原来的图象，信息没有任何丢失，称为无损压缩；第二类压缩过程是不可逆的，无法完全恢复出原图象，信息有一定的丢失，称为有损压缩。选择哪一类压缩，要折衷考虑，尽管我们希望能够无损压缩，但是通常有损压缩的压缩比</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">即原图象占的字节数与压缩后图象占的字节数之比，压缩比越大，说明压缩效率越高</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">比无损压缩的高。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">图象压缩一般通过改变图象的表示方式来达到，因此压缩和编码是分不开的。图象压缩的主要应用是图象信息的传输和存储，可广泛地应用于广播电视、电视会议、计算机通讯、传真、多媒体系统、医学图象、卫星图象等领域。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">压缩编码的方法有很多，主要分成以下四大类：</SPAN><SPAN 
lang=EN-US>(1)</SPAN><SPAN style="FONT-FAMILY: 宋体">象素编码；</SPAN><SPAN 
lang=EN-US>(2)</SPAN><SPAN style="FONT-FAMILY: 宋体">预测编码；</SPAN><SPAN 
lang=EN-US>(3)</SPAN><SPAN style="FONT-FAMILY: 宋体">变换编码；</SPAN><SPAN 
lang=EN-US>(4)</SPAN><SPAN style="FONT-FAMILY: 宋体">其它方法。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">所谓象素编码是指，编码时对每个象素单独处理，不考虑象素之间的相关性。在象素编码中常用的几种方法有：</SPAN><SPAN 
lang=EN-US>(1)</SPAN><SPAN style="FONT-FAMILY: 宋体">脉冲编码调制</SPAN><SPAN 
lang=EN-US>(Pulse Code Modulation</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，简称</SPAN><SPAN lang=EN-US>PCM)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">；</SPAN><SPAN lang=EN-US>(2)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">熵编码</SPAN><SPAN lang=EN-US>(Entropy Coding)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">；</SPAN><SPAN lang=EN-US>(3)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">行程编码</SPAN><SPAN lang=EN-US>(Run Length 
Coding)</SPAN><SPAN style="FONT-FAMILY: 宋体">；</SPAN><SPAN 
lang=EN-US>(4)</SPAN><SPAN style="FONT-FAMILY: 宋体">位平面编码</SPAN><SPAN 
lang=EN-US>(Bit Plane Coding)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">。其中我们要介绍的是熵编码中的哈夫曼</SPAN><SPAN 
lang=EN-US>(Huffman)</SPAN><SPAN style="FONT-FAMILY: 宋体">编码和行程编码</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">以读取</SPAN><SPAN 
lang=EN-US>.PCX</SPAN><SPAN style="FONT-FAMILY: 宋体">文件为例</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">所谓预测编码是指，去除相邻象素之间的相关性和冗余性，只对新的信息进行编码。举个简单的例子，因为象素的灰度是连续的，所以在一片区域中，相邻象素之间灰度值的差别可能很小。如果我们只记录第一个象素的灰度，其它象素的灰度都用它与前一个象素灰度之差来表示，就能起到压缩的目的。如</SPAN><SPAN 
lang=EN-US>248</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>2</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>1</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>0</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>1</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>3</SPAN><SPAN style="FONT-FAMILY: 宋体">，实际上这</SPAN><SPAN 
lang=EN-US>6</SPAN><SPAN style="FONT-FAMILY: 宋体">个象素的灰度是</SPAN><SPAN 
lang=EN-US>248</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>250</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>251</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>251</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>252</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>255</SPAN><SPAN style="FONT-FAMILY: 宋体">。表示</SPAN><SPAN 
lang=EN-US>250</SPAN><SPAN style="FONT-FAMILY: 宋体">需要</SPAN><SPAN 
lang=EN-US>8</SPAN><SPAN style="FONT-FAMILY: 宋体">个比特，而表示</SPAN><SPAN 
lang=EN-US>2</SPAN><SPAN style="FONT-FAMILY: 宋体">只需要两个比特，这样就实现了压缩。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">常用的预测编码有Δ调制</SPAN><SPAN lang=EN-US>(Delta 
Modulation</SPAN><SPAN style="FONT-FAMILY: 宋体">，简称</SPAN><SPAN 
lang=EN-US>DM)</SPAN><SPAN style="FONT-FAMILY: 宋体">；微分预测编码</SPAN><SPAN 
lang=EN-US>(Differential Pulse Code Modulation</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>DPCM)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，具体的细节在此就不详述了。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">所谓变换编码是指，将给定的图象变换到另一个数据域</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">如频域</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">上，使得大量的信息能用较少的数据来表示，从而达到压缩的目的。变换编码有很多，如</SPAN><SPAN 
lang=EN-US>(1)</SPAN><SPAN style="FONT-FAMILY: 宋体">离散傅立叶变换</SPAN><SPAN 
lang=EN-US>(Discrete Fourier Transform</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，简称</SPAN><SPAN lang=EN-US>DFT)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">；</SPAN><SPAN lang=EN-US>(2)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">离散余弦变换</SPAN><SPAN lang=EN-US>(Discrete Cosine 
Transform</SPAN><SPAN style="FONT-FAMILY: 宋体">，简称</SPAN><SPAN 
lang=EN-US>DCT)</SPAN><SPAN style="FONT-FAMILY: 宋体">；</SPAN><SPAN 
lang=EN-US>(3)</SPAN><SPAN style="FONT-FAMILY: 宋体">离散哈达玛变换</SPAN><SPAN 
lang=EN-US>(Discrete Hadamard Transform</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，简称</SPAN><SPAN lang=EN-US>DHT)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">其它的编码方法也有很多，如混合编码</SPAN><SPAN lang=EN-US>(Hybird 
Coding)</SPAN><SPAN style="FONT-FAMILY: 宋体">、矢量量化</SPAN><SPAN lang=EN-US>(Vector 
Quantize</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>VQ) 
</SPAN><SPAN style="FONT-FAMILY: 宋体">、</SPAN><SPAN lang=EN-US>LZW</SPAN><SPAN 
style="FONT-FAMILY: 宋体">算法。在这里，我们只介绍</SPAN><SPAN lang=EN-US>LZW</SPAN><SPAN 
style="FONT-FAMILY: 宋体">算法的大体思想。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">值得注意的是，近些年来出现了很多新的压缩编码方法，如使用人工神经元网络</SPAN><SPAN 
lang=EN-US>(Artificial Neural Network</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，简称</SPAN><SPAN lang=EN-US>ANN)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的压缩编码算法、分形</SPAN><SPAN lang=EN-US>(Fractl)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">、小波</SPAN><SPAN lang=EN-US>(Wavelet) </SPAN><SPAN 
style="FONT-FAMILY: 宋体">、基于对象</SPAN><SPAN lang=EN-US>(Object Based)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的压缩编码算法、基于模型</SPAN><SPAN lang=EN-US>(Model 
CBased)</SPAN><SPAN style="FONT-FAMILY: 宋体">的压缩编码算法</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">应用在</SPAN><SPAN 
lang=EN-US>MPEG4</SPAN><SPAN style="FONT-FAMILY: 宋体">及未来的视频压缩编码标准中</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">。这些都超出了本书的范围。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">本章的最后，我们将以</SPAN><SPAN lang=EN-US>JPEG</SPAN><SPAN 
style="FONT-FAMILY: 宋体">压缩编码标准为例，看看上面的几种编码方法在实际的压缩编码中是怎样应用的。</SPAN></P>
<H2><SPAN lang=EN-US>9.1</SPAN> <SPAN lang=EN-US></SPAN><A 
name=_Toc486331908></A><A name=_Toc486332908></A><A name=_Toc486339017></A><A 
name=_Toc454810882></A><A 
name=_Toc454856656><SPAN><SPAN>哈夫曼编码</SPAN></SPAN></A></H2>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">哈夫曼</SPAN><SPAN 
lang=EN-US>(Huffman)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">编码是一种常用的压缩编码方法，是</SPAN><SPAN 
lang=EN-US>Huffman</SPAN><SPAN style="FONT-FAMILY: 宋体">于</SPAN><SPAN 
lang=EN-US>1952</SPAN><SPAN 
style="FONT-FAMILY: 宋体">年为压缩文本文件建立的。它的基本原理是频繁使用的数据用较短的代码代替，较少使用的数据用较长的代码代替，每个数据的代码各不相同。这些代码都是二进制码，且码的长度是可变的。举个例子：假设一个文件中出现了</SPAN><SPAN 
lang=EN-US>8</SPAN><SPAN style="FONT-FAMILY: 宋体">种符号</SPAN><SPAN 
lang=EN-US>S0,S1,S2,S3,S4,S5,S6,S7</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，那么每种符号要编码，至少需要</SPAN><SPAN lang=EN-US>3</SPAN><SPAN 
style="FONT-FAMILY: 宋体">比特。假设编码成</SPAN><SPAN 
lang=EN-US>000,001,010,011,100,101,110,111(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">称做码字</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">。那么符号序列</SPAN><SPAN 
lang=EN-US>S0S1S7S0S1S6S2S2S3S4S5S0S0S1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">编码后变成</SPAN><SPAN 
lang=EN-US>000001111000001110010010011100101000000001</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，共用了</SPAN><SPAN lang=EN-US>42</SPAN><SPAN 
style="FONT-FAMILY: 宋体">比特。我们发现</SPAN><SPAN lang=EN-US>S0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>S1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>S2</SPAN><SPAN 
style="FONT-FAMILY: 宋体">这三个符号出现的频率比较大，其它符号出现的频率比较小，如果我们采用一种编码方案使得</SPAN><SPAN 
lang=EN-US>S0</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>S1</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>S2</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的码字短，其它符号的码字长，这样就能够减少占用的比特数。例如，我们采用这样的编码方案：</SPAN><SPAN 
lang=EN-US>S0</SPAN><SPAN style="FONT-FAMILY: 宋体">到</SPAN><SPAN 
lang=EN-US>S7</SPAN><SPAN style="FONT-FAMILY: 宋体">的码字分别</SPAN><SPAN 
lang=EN-US>01,11,101,0000,0001,0010,0011,100</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，那么上述符号序列变成</SPAN><SPAN 
lang=EN-US>011110001110011101101000000010010010111</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，共用了</SPAN><SPAN lang=EN-US>39</SPAN><SPAN 
style="FONT-FAMILY: 宋体">比特，尽管有些码字如</SPAN><SPAN lang=EN-US>S3</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>S4</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>S5</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>S6</SPAN><SPAN 
style="FONT-FAMILY: 宋体">变长了</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">由</SPAN><SPAN lang=EN-US>3</SPAN><SPAN 
style="FONT-FAMILY: 宋体">位变成</SPAN><SPAN lang=EN-US>4</SPAN><SPAN 
style="FONT-FAMILY: 宋体">位</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，但使用频繁的几个码字如</SPAN><SPAN lang=EN-US>S0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>S1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">变短了，所以实现了压缩。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">上述的编码是如何得到的呢？随意乱写是不行的。编码必须保证不能出现一个码字和另一个的前几位相同的情况，比如说，如果</SPAN><SPAN 
lang=EN-US>S0</SPAN><SPAN style="FONT-FAMILY: 宋体">的码字为</SPAN><SPAN 
lang=EN-US>01</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>S2</SPAN><SPAN style="FONT-FAMILY: 宋体">的码字为</SPAN><SPAN 
lang=EN-US>011</SPAN><SPAN style="FONT-FAMILY: 宋体">，那么当序列中出现</SPAN><SPAN 
lang=EN-US>011</SPAN><SPAN style="FONT-FAMILY: 宋体">时，你不知道是</SPAN><SPAN 
lang=EN-US>S0</SPAN><SPAN style="FONT-FAMILY: 宋体">的码字后面跟了个</SPAN><SPAN 
lang=EN-US>1</SPAN><SPAN style="FONT-FAMILY: 宋体">，还是完整的一个</SPAN><SPAN 
lang=EN-US>S2</SPAN><SPAN style="FONT-FAMILY: 宋体">的码字。我们给出的编码能够保证这一点。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">下面给出具体的</SPAN><SPAN 
lang=EN-US>Huffman</SPAN><SPAN style="FONT-FAMILY: 宋体">编码算法。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(1)<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体">首先统计出每个符号出现的频率，上例</SPAN><SPAN 
lang=EN-US>S0</SPAN><SPAN style="FONT-FAMILY: 宋体">到</SPAN><SPAN 
lang=EN-US>S7</SPAN><SPAN style="FONT-FAMILY: 宋体">的出现频率分别为</SPAN><SPAN 
lang=EN-US>4/14</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>3/14</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>2/14</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>1/14</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>1/14</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>1/14</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>1/14</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>1/14</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(2)<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体">从左到右把上述频率按从小到大的顺序排列。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(3)<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN 
style="FONT-FAMILY: 宋体">每一次选出最小的两个值，作为二叉树的两个叶子节点，将和作为它们的根节点，这两个叶子节点不再参与比较，新的根节点参与比较。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(4)<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体">重复</SPAN><SPAN 
lang=EN-US>(3)</SPAN><SPAN style="FONT-FAMILY: 宋体">，直到最后得到和为</SPAN><SPAN 
lang=EN-US>1</SPAN><SPAN style="FONT-FAMILY: 宋体">的根节点。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(5)<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN><SPAN style="FONT-FAMILY: 宋体">将形成的二叉树的左节点标</SPAN><SPAN 
lang=EN-US>0</SPAN><SPAN style="FONT-FAMILY: 宋体">，右节点标</SPAN><SPAN 
lang=EN-US>1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">。把从最上面的根节点到最下面的叶子节点途中遇到的</SPAN><SPAN 
lang=EN-US>0,1</SPAN><SPAN style="FONT-FAMILY: 宋体">序列串起来，就得到了各个符号的编码。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">上面的例子用</SPAN><SPAN 
lang=EN-US>Huffman</SPAN><SPAN style="FONT-FAMILY: 宋体">编码的过程如图</SPAN><SPAN 
lang=EN-US>9.1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所示，其中圆圈中的数字是新节点产生的顺序。可见，我们上面给出的编码就是这么得到的。</SPAN></P>
<P class=a style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US><IMG height=330 
src="第9章 图象的压缩编码，JPEG压缩编码标准.files/image001.gif" width=519 
v:shapes="_x0000_i1025"> </SPAN></P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
style="FONT-FAMILY: 宋体">图</SPAN>9.1&nbsp;&nbsp;&nbsp;&nbsp; Huffman</B><B><SPAN 
style="FONT-FAMILY: 宋体">编码的示意图</SPAN><SPAN lang=EN-US></SPAN></B></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">产生</SPAN><SPAN 
lang=EN-US>Huffman</SPAN><SPAN 
style="FONT-FAMILY: 宋体">编码需要对原始数据扫描两遍。第一遍扫描要精确地统计出原始数据中，每个值出现的频率，第二遍是建立</SPAN><SPAN 
lang=EN-US>Huffman</SPAN><SPAN 
style="FONT-FAMILY: 宋体">树并进行编码。由于需要建立二叉树并遍历二叉树生成编码，因此数据压缩和还原速度都较慢，但简单有效，因而得到广泛的应用。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">源程序就不给出了，有兴趣的读者可以自己实现。</SPAN></P>
<H2><SPAN lang=EN-US>9.2</SPAN> <SPAN lang=EN-US></SPAN><A 
name=_Toc486331909></A><A name=_Toc486332909></A><A name=_Toc486339018></A><A 
name=_Toc454810883></A><A 
name=_Toc454856657><SPAN><SPAN>行程编码</SPAN></SPAN></A></H2>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">行程编码</SPAN><SPAN 
lang=EN-US>(Run Length Coding)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的原理也很简单：将一行中颜色值相同的相邻象素用一个计数值和该颜色值来代替。例如</SPAN><SPAN 
lang=EN-US>aaabccccccddeee</SPAN><SPAN style="FONT-FAMILY: 宋体">可以表示为</SPAN><SPAN 
lang=EN-US>3a1b6c2d3e</SPAN><SPAN 
style="FONT-FAMILY: 宋体">。如果一幅图象是由很多块颜色相同的大面积区域组成，那么采用行程编码的压缩效率是惊人的。然而，该算法也导致了一个致命弱点，如果图象中每两个相邻点的颜色都不同，用这种算法不但不能压缩，反而数据量增加一倍。所以现在单纯采用行程编码的压缩算法用得并不多，</SPAN><SPAN 
lang=EN-US>PCX</SPAN><SPAN style="FONT-FAMILY: 宋体">文件算是其中的一种。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>PCX</SPAN><SPAN 
style="FONT-FAMILY: 宋体">文件最早是</SPAN><SPAN lang=EN-US>PC Paintbrush</SPAN><SPAN 
style="FONT-FAMILY: 宋体">软件所采用的一种文件格式，由于压缩比不高，现在用的并不是很多了。它也是由头信息、调色板、实际的图象数据三个部分组成。其中头信息的结构为：</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>typedef struct{</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;char manufacturer;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;char version;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;char encoding;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;char bits_per_pixel;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;WORD xmin,ymin;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;WORD xmax,ymax;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;WORD hres;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;WORD vres;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;char palette[48];</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;char reserved;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;char colour_planes;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;WORD bytes_per_line;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;WORD palette_type;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;char filler[58];</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>} 
PCXHEAD;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">其中值得注意的是以下几个数据：</SPAN><SPAN 
lang=EN-US>manufacturer</SPAN><SPAN style="FONT-FAMILY: 宋体">为</SPAN><SPAN 
lang=EN-US>PCX</SPAN><SPAN style="FONT-FAMILY: 宋体">文件的标识，必须为</SPAN><SPAN 
lang=EN-US>0x0a</SPAN><SPAN style="FONT-FAMILY: 宋体">；</SPAN><SPAN 
lang=EN-US>xmin</SPAN><SPAN style="FONT-FAMILY: 宋体">为最小的</SPAN><SPAN 
lang=EN-US>x</SPAN><SPAN style="FONT-FAMILY: 宋体">坐标，</SPAN><SPAN 
lang=EN-US>xmax</SPAN><SPAN style="FONT-FAMILY: 宋体">最大的</SPAN><SPAN 
lang=EN-US>x</SPAN><SPAN style="FONT-FAMILY: 宋体">坐标，所以图象的宽度为</SPAN><SPAN 
lang=EN-US>xmax-xmin+1</SPAN><SPAN style="FONT-FAMILY: 宋体">，同样图象的高度为</SPAN><SPAN 
lang=EN-US>ymax-yin+1</SPAN><SPAN style="FONT-FAMILY: 宋体">；</SPAN><SPAN 
lang=EN-US>bytes_per_line</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为每个编码行所占的字节数，下面将详细介绍。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>PCX</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的调色板在文件的最后。以</SPAN><SPAN lang=EN-US>256</SPAN><SPAN 
style="FONT-FAMILY: 宋体">色</SPAN><SPAN lang=EN-US>PCX</SPAN><SPAN 
style="FONT-FAMILY: 宋体">文件为例，倒数第</SPAN><SPAN lang=EN-US>769</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个字节为颜色数的标识，</SPAN><SPAN lang=EN-US>256</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时该字节必须为</SPAN><SPAN lang=EN-US>12</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，剩下的</SPAN><SPAN lang=EN-US>768(256</SPAN><SPAN 
style="FONT-FAMILY: 宋体">×</SPAN><SPAN lang=EN-US>3)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为调色板的</SPAN><SPAN lang=EN-US>RGB</SPAN><SPAN 
style="FONT-FAMILY: 宋体">值。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">为了叙述方便，我们针对</SPAN><SPAN lang=EN-US>256</SPAN><SPAN 
style="FONT-FAMILY: 宋体">色</SPAN><SPAN lang=EN-US>PCX</SPAN><SPAN 
style="FONT-FAMILY: 宋体">文件，介绍一下它的解码过程。编码是解码的逆过程，有兴趣的读者可以试着自己来完成。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">解码是以行为单位的，该行所占的字节数由</SPAN><SPAN 
lang=EN-US>bytes_per_line</SPAN><SPAN 
style="FONT-FAMILY: 宋体">给定。为此，我们开一个大小为</SPAN><SPAN 
lang=EN-US>bytes_per_line</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的解码缓冲区。一开始，将缓冲区的所有内容清零。从文件中读出一个字节</SPAN><SPAN 
lang=EN-US>C</SPAN><SPAN style="FONT-FAMILY: 宋体">，若</SPAN><SPAN 
lang=EN-US>C&gt;0xc0</SPAN><SPAN style="FONT-FAMILY: 宋体">，说明是行程</SPAN><SPAN 
lang=EN-US>(Run Length)</SPAN><SPAN style="FONT-FAMILY: 宋体">信息，即</SPAN><SPAN 
lang=EN-US>C</SPAN><SPAN style="FONT-FAMILY: 宋体">的低</SPAN><SPAN 
lang=EN-US>6</SPAN><SPAN style="FONT-FAMILY: 宋体">位表示后面连续的字节个数</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">所以最多</SPAN><SPAN 
lang=EN-US>63</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个连续颜色相同的象素，若还有颜色相同的象素，将在下一个行程处理</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">，文件的下一个字节就是实际的图象数据</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">即该颜色在调色板中的索引值</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">。若</SPAN><SPAN 
lang=EN-US>C&lt;0xc0</SPAN><SPAN style="FONT-FAMILY: 宋体">，则表示</SPAN><SPAN 
lang=EN-US>C</SPAN><SPAN style="FONT-FAMILY: 宋体">是实际的图象数据。如此反复，直到这</SPAN><SPAN 
lang=EN-US>bytes_per_line</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个字节处理完，这一行的解码完成。</SPAN><SPAN lang=EN-US>PCX</SPAN><SPAN 
style="FONT-FAMILY: 宋体">就是有若干个这样的解码行组成。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">下面是实现</SPAN><SPAN 
lang=EN-US>256</SPAN><SPAN style="FONT-FAMILY: 宋体">色</SPAN><SPAN 
lang=EN-US>PCX</SPAN><SPAN 
style="FONT-FAMILY: 宋体">文件解码的源程序，其中第二个函数对一行进行解码，应该把阅读的重点放在这个函数上。要注意的是，执行时文件</SPAN><SPAN 
lang=EN-US>C:\\test.pcx</SPAN><SPAN 
style="FONT-FAMILY: 宋体">必须存在，而且是一个</SPAN><SPAN lang=EN-US>256</SPAN><SPAN 
style="FONT-FAMILY: 宋体">色</SPAN><SPAN lang=EN-US>PCX</SPAN><SPAN 
style="FONT-FAMILY: 宋体">文件。</SPAN></P>
<P style="LINE-HEIGHT: 18pt">unsigned int&nbsp;&nbsp;&nbsp; PcxBytesPerLine;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>BOOL LoadPcxFile (HWND hWnd,char 
*PcxFileName)</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>{</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>FILE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
*PCXfp;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>PCXHEAD&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; header;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp; </SPAN>&nbsp; 
LOGPALETTE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *pPal;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp; </SPAN>&nbsp; 
HPALETTE&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hPrevPalette; </P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp; </SPAN>&nbsp; 
HDC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
hDc;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>HLOCAL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hPal;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>DWORD 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp; ImgSize;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>DWORD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OffBits,BufSize;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>LPBITMAPINFOHEADER&nbsp;&nbsp;&nbsp; lpImgData;&nbsp;&nbsp;&nbsp;&nbsp; 
</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>DWORD&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
i;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>LONG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp; x,y;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PcxTag;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>unsigned char&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LineBuffer[6400];</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>LPSTR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
lpPtr;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>HFILE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hfbmp;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>if((PCXfp=fopen(PcxFileName,"rb"))==NULL){ //</SPAN><SPAN 
style="FONT-FAMILY: 宋体">文件没有找到</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>MessageBox(hWnd,"File c:\\test.pcx 
not found!","Error Message",</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>MB_OK|MB_ICONEXCLAMATION);</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>return FALSE;</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>}</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">读出头信息</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp; </SPAN>&nbsp; 
fread((char*)&amp;header,1,sizeof(PCXHEAD),PCXfp);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp; </SPAN>&nbsp; 
if(header.manufacturer!=0x0a){ //<SPAN 
style="FONT-FAMILY: 宋体">不是一个合法的</SPAN><SPAN lang=EN-US>PCX</SPAN><SPAN 
style="FONT-FAMILY: 宋体">文件</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>MessageBox(hWnd,"Not a valid Pcx 
file!","Error Message",</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>MB_OK|MB_ICONEXCLAMATION);</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>fclose(PCXfp);</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return FALSE;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>}</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">将文件指针指向调色板开始处</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>fseek(PCXfp,-769L,SEEK_END);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">获取颜色数信息</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>PcxTag=fgetc(PCXfp)&amp;0xff;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>if(PcxTag!=12){ //<SPAN style="FONT-FAMILY: 宋体">非</SPAN><SPAN 
lang=EN-US>256</SPAN><SPAN style="FONT-FAMILY: 宋体">色，返回</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MessageBox(hWnd,"Not a 256 colors 
Pcx file!","Error Message",</P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>MB_OK|MB_ICONEXCLAMATION);</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>fclose(PCXfp);</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>return FALSE;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>}</P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>//</SPAN><SPAN 
style="FONT-FAMILY: 宋体">创建新的</SPAN><SPAN lang=EN-US>BITMAPFILEHEADER</SPAN><SPAN 
style="FONT-FAMILY: 宋体">和</SPAN><SPAN lang=EN-US>BITMAPINFOHEADER</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>memset((char 
*)&amp;bf,0,sizeof(BITMAPFILEHEADER));&nbsp;&nbsp;&nbsp;&nbsp; </P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>memset((char *)&amp;bi,0,sizeof(BITMAPINFOHEADER));</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">填写</SPAN><SPAN 
lang=EN-US>BITMAPINFOHEADER</SPAN><SPAN style="FONT-FAMILY: 宋体">头信息</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>bi.biSize=sizeof(BITMAPINFOHEADER);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">得到图象的宽和高</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>bi.biWidth=header.xmax-header.xmin+1;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>bi.biHeight=header.ymax-header.ymin+1;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>bi.biPlanes=1;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>bi.biBitCount=8;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>bi.biCompression=BI_RGB;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>ImgWidth=bi.biWidth;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>ImgHeight=bi.biHeight;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>NumColors=256;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>LineBytes=(DWORD)WIDTHBYTES(bi.biWidth*bi.biBitCount);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>ImgSize=(DWORD)LineBytes*bi.biHeight;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">填写</SPAN><SPAN 
lang=EN-US>BITMAPFILEHEADER</SPAN><SPAN style="FONT-FAMILY: 宋体">头信息</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>bf.bfType=0x4d42;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>bf.bfSize=sizeof(BITMAPFILEHEADER)+sizeof(BITMAPINFOHEADER)+</P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>NumColors*sizeof(RGBQUAD)+ImgSize;</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>bf.bfOffBits=(DWORD)(NumColors*sizeof(RGBQUAD)+</P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>sizeof(BITMAPFILEHEADER)+sizeof(BITMAPINFOHEADER));</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">为新图分配缓冲区</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>if((hImgData=GlobalAlloc(GHND,(DWORD)</P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>(sizeof(BITMAPINFOHEADER)+</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>NumColors*sizeof(RGBQUAD)+ImgSize)))==NULL)</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>{</P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>MessageBox(hWnd,"Error alloc 
memory!","ErrorMessage",</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>MB_OK|MB_ICONEXCLAMATION);</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp; 
</SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fclose(PCXfp);</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>return FALSE;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>}</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>lpImgData=(LPBITMAPINFOHEADER)GlobalLock(hImgData); </P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">拷贝头信息</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>memcpy(lpImgData,(char *)&amp;bi,sizeof(BITMAPINFOHEADER));</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>lpPtr=(char *)lpImgData+sizeof(BITMAPINFOHEADER);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>256</SPAN><SPAN 
style="FONT-FAMILY: 宋体">色调色板分配内存</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp; </SPAN>&nbsp; 
hPal=LocalAlloc(LHND,sizeof(LOGPALETTE)+</P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>NumColors* 
sizeof(PALETTEENTRY));</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>pPal =(LOGPALETTE 
*)LocalLock(hPal);</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp; </SPAN>&nbsp; 
pPal-&gt;palNumEntries =256;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>pPal-&gt;palVersion = 0x300;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>for (i = 0; i &lt; 256; i++) {</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">读取调色板中的</SPAN><SPAN 
lang=EN-US>RGB</SPAN><SPAN style="FONT-FAMILY: 宋体">值</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp; 
</SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
pPal-&gt;palPalEntry[i].peRed=(BYTE)fgetc(PCXfp);</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>pPal-&gt;palPalEntry[i].peGreen=(BYTE)fgetc(PCXfp);</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>pPal-&gt;palPalEntry[i].peBlue=(BYTE)fgetc(PCXfp);</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>pPal-&gt;palPalEntry[i].peFlags=(BYTE)0;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>*(lpPtr++)=(unsigned char)pPal-&gt;palPalEntry[i].peBlue;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>*(lpPtr++)=(unsigned char)pPal-&gt;palPalEntry[i].peGreen;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>*(lpPtr++)=(unsigned char)pPal-&gt;palPalEntry[i].peRed;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>*(lpPtr++)=0;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>}</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">产生新的逻辑调色板</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>hPalette=CreatePalette(pPal);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>LocalUnlock(hPal);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>LocalFree(hPal);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>hDc=GetDC(hWnd);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>if(hPalette){</P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>hPrevPalette=SelectPalette(hDc,hPalette,FALSE);</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>RealizePalette(hDc);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>}</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">解码行所占的字节数</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>PcxBytesPerLine=(unsigned int)header.bytes_per_line;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">将文件指针指向图象数据的开始处</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>fseek(PCXfp,(LONG)sizeof(PCXHEAD),SEEK_SET);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">缓冲区大小</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>OffBits=bf.bfOffBits-sizeof(BITMAPFILEHEADER);</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>//BufSize</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为缓冲区大小</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>BufSize=OffBits+bi.biHeight*LineBytes;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>for(y=0;y&lt;bi.biHeight;y++){</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">指向新图中相应的位置</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>lpPtr=(char *)lpImgData+BufSize-LineBytes-y*LineBytes;</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">解码该行，放在数组</SPAN><SPAN 
lang=EN-US>LineBuffer</SPAN><SPAN style="FONT-FAMILY: 宋体">中</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>ReadPcxLine(LineBuffer,PCXfp);</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>for(x=0;x&lt;bi.biWidth;x++)</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>*(lpPtr++)=LineBuffer[x]; //<SPAN 
style="FONT-FAMILY: 宋体">将该行存储到位图数据中</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>}</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">创建新的位图</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>hBitmap=CreateDIBitmap(hDc,(LPBITMAPINFOHEADER)lpImgData,</P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(LONG)CBM_INIT,</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(LPSTR)lpImgData+</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>sizeof(BITMAPINFOHEADER)+</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>NumColors*sizeof(RGBQUAD),</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>(LPBITMAPINFO)lpImgData,</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>DIB_RGB_COLORS);</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>if(hPalette &amp;&amp; hPrevPalette){</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>SelectPalette(hDc,hPrevPalette,FALSE);</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>RealizePalette(hDc);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>}</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>hfbmp=_lcreat("c:\\pcx2bmp.bmp",0);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>_lwrite(hfbmp,(LPSTR)&amp;bf,sizeof(BITMAPFILEHEADER)); </P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>_lwrite(hfbmp,(LPSTR)lpImgData,BufSize);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>_lclose(hfbmp);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>fclose(PCXfp); </P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">释放内存和资源</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>ReleaseDC(hWnd,hDc);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>GlobalUnlock(hImgData);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>return TRUE; </P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>}</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>//</SPAN><SPAN 
style="FONT-FAMILY: 宋体">对每一行进行解码，结果存储到指针</SPAN><SPAN lang=EN-US>p</SPAN><SPAN 
style="FONT-FAMILY: 宋体">指向的内存中</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>void ReadPcxLine(unsigned char 
*p,FILE *fp)</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>{</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>unsigned int &nbsp; n=0,i;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>char 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
c;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>memset(p,0,PcxBytesPerLine);</P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>do{</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">读出一个字节</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>c=fgetc(fp)&amp;0xff;</P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>if((c&amp;0xc0)==0xc0){ 
//</SPAN><SPAN style="FONT-FAMILY: 宋体">是个形成字节</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>//i</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>c</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的低六位</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>i=c&amp;0x3f;</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>//<SPAN style="FONT-FAMILY: 宋体">下一个字节为实际的图象数据</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>c=fgetc(fp);</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>while(i--) p[n++]=c; //<SPAN style="FONT-FAMILY: 宋体">填充连续的</SPAN><SPAN 
lang=EN-US>i</SPAN><SPAN style="FONT-FAMILY: 宋体">个字节到</SPAN><SPAN 
lang=EN-US>p</SPAN><SPAN style="FONT-FAMILY: 宋体">中</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>}</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>else p[n++]=c; //<SPAN 
style="FONT-FAMILY: 宋体">否则是实际的图象数据，直接填入到</SPAN><SPAN lang=EN-US>p</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>}while (n&lt;PcxBytesPerLine); //<SPAN 
style="FONT-FAMILY: 宋体">共读取</SPAN><SPAN lang=EN-US>PcxBytesPerLine</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个字节</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>}</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">对一幅的</SPAN><SPAN 
lang=EN-US>PCX</SPAN><SPAN style="FONT-FAMILY: 宋体">文件格式的图象解码后，结果如图</SPAN><SPAN 
lang=EN-US>9.2</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所示。显示的是我最喜欢的法国影星阿佳妮・伊莎贝拉。</SPAN></P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><SPAN 
lang=EN-US><IMG height=337 src="第9章 图象的压缩编码，JPEG压缩编码标准.files/image002.gif" 
width=263 v:shapes="_x0000_i1026"> </SPAN></P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
style="FONT-FAMILY: 宋体">图</SPAN>9.2&nbsp;&nbsp;&nbsp;&nbsp; </B><B><SPAN 
style="FONT-FAMILY: 宋体">一幅</SPAN><SPAN lang=EN-US>PCX</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">文件格式的图象</SPAN><SPAN lang=EN-US></SPAN></B></P>
<H2><SPAN lang=EN-US>9.3</SPAN> <A name=_Toc486331910></A><A 
name=_Toc486332910></A><A name=_Toc486339019></A><A name=_Toc454810884></A><A 
name=_Toc454856658><SPAN><SPAN>LZW</SPAN></SPAN></A><SPAN><SPAN><SPAN 
style="FONT-FAMILY: 黑体">算法的大体思想</SPAN></SPAN></SPAN></H2>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>LZW</SPAN><SPAN 
style="FONT-FAMILY: 宋体">是一种比较复杂的压缩算法，其压缩效率也比较高。我们在这里只介绍一下它的基本原理：</SPAN><SPAN 
lang=EN-US>LZW</SPAN><SPAN 
style="FONT-FAMILY: 宋体">把每一个第一次出现的字符串用一个数值来编码，在还原程序中再将这个数值还成原来的字符串。例如：用数值</SPAN><SPAN 
lang=EN-US>0x100</SPAN><SPAN style="FONT-FAMILY: 宋体">代替字符串“</SPAN><SPAN 
lang=EN-US>abccddeee</SPAN><SPAN 
style="FONT-FAMILY: 宋体">”，每当出现该字符串时，都用</SPAN><SPAN lang=EN-US>0x100</SPAN><SPAN 
style="FONT-FAMILY: 宋体">代替，这样就起到了压缩的作用。至于</SPAN><SPAN 
lang=EN-US>0x100</SPAN><SPAN 
style="FONT-FAMILY: 宋体">与字符串的对应关系则是在压缩过程中动态生成的，而且这种对应关系隐含在压缩数据中，随着解压缩的进行这张编码表会从压缩数据中逐步得到恢复，后面的压缩数据再根据前面数据产生的对应关系产生更多的对应关系，直到压缩文件结束为止。</SPAN><SPAN 
lang=EN-US>LZW</SPAN><SPAN style="FONT-FAMILY: 宋体">是无损的。</SPAN><SPAN 
lang=EN-US>GIF</SPAN><SPAN style="FONT-FAMILY: 宋体">文件采用了这种压缩算法。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">要注意的是，</SPAN><SPAN 
lang=EN-US>LZW</SPAN><SPAN style="FONT-FAMILY: 宋体">算法由</SPAN><SPAN 
lang=EN-US>Unisys</SPAN><SPAN 
style="FONT-FAMILY: 宋体">公司在美国申请了专利，要使用它首先要获得该公司的认可。</SPAN></P>
<H2><SPAN lang=EN-US>9.4</SPAN> <A name=_Toc486331911></A><A 
name=_Toc486332911></A><A name=_Toc486339020></A><A name=_Toc454810885></A><A 
name=_Toc454856659><SPAN><SPAN>JPEG</SPAN></SPAN></A><SPAN><SPAN><SPAN 
style="FONT-FAMILY: 黑体">压缩编码标准</SPAN></SPAN></SPAN></H2>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>JPEG</SPAN><SPAN 
style="FONT-FAMILY: 宋体">是联合图象专家组</SPAN><SPAN lang=EN-US>(Joint Picture Expert 
Group)</SPAN><SPAN style="FONT-FAMILY: 宋体">的英文缩写，是国际标准化组织</SPAN><SPAN 
lang=EN-US>(ISO)</SPAN><SPAN style="FONT-FAMILY: 宋体">和</SPAN><SPAN 
lang=EN-US>CCITT</SPAN><SPAN 
style="FONT-FAMILY: 宋体">联合制定的静态图象的压缩编码标准。和相同图象质量的其它常用文件格式</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">如</SPAN><SPAN 
lang=EN-US>GIF</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>TIFF</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>PCX)</SPAN><SPAN style="FONT-FAMILY: 宋体">相比，</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN 
style="FONT-FAMILY: 宋体">是目前静态图象中压缩比最高的。我们给出具体的数据来对比一下。例图采用</SPAN><SPAN 
lang=EN-US>Windows95</SPAN><SPAN style="FONT-FAMILY: 宋体">目录下的</SPAN><SPAN 
lang=EN-US>Clouds.bmp</SPAN><SPAN style="FONT-FAMILY: 宋体">，原图大小为</SPAN><SPAN 
lang=EN-US>640*480</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>256</SPAN><SPAN style="FONT-FAMILY: 宋体">色。用工具</SPAN><SPAN 
lang=EN-US>SEA(version1.3)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将其分别转成</SPAN><SPAN lang=EN-US>24</SPAN><SPAN 
style="FONT-FAMILY: 宋体">位色</SPAN><SPAN lang=EN-US>BMP</SPAN><SPAN 
style="FONT-FAMILY: 宋体">、</SPAN><SPAN lang=EN-US>24</SPAN><SPAN 
style="FONT-FAMILY: 宋体">位色</SPAN><SPAN lang=EN-US>JPEG</SPAN><SPAN 
style="FONT-FAMILY: 宋体">、</SPAN><SPAN lang=EN-US>GIF(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">只能转成</SPAN><SPAN lang=EN-US>256</SPAN><SPAN 
style="FONT-FAMILY: 宋体">色</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">压缩格式、</SPAN><SPAN lang=EN-US>24</SPAN><SPAN 
style="FONT-FAMILY: 宋体">位色</SPAN><SPAN lang=EN-US>TIFF</SPAN><SPAN 
style="FONT-FAMILY: 宋体">压缩格式、</SPAN><SPAN lang=EN-US>24</SPAN><SPAN 
style="FONT-FAMILY: 宋体">位色</SPAN><SPAN lang=EN-US>TGA</SPAN><SPAN 
style="FONT-FAMILY: 宋体">压缩格式。得到的文件大小</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">以字节为单位</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">分别为：</SPAN><SPAN lang=EN-US>921,654</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>17,707</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>177,152</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>923,044</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>768,136</SPAN><SPAN 
style="FONT-FAMILY: 宋体">。可见</SPAN><SPAN lang=EN-US>JPEG</SPAN><SPAN 
style="FONT-FAMILY: 宋体">比其它几种压缩比要高得多，而图象质量都差不多</SPAN><SPAN 
lang=EN-US>(JPEG</SPAN><SPAN style="FONT-FAMILY: 宋体">处理的颜色只有真彩和灰度图</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">正是由于</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的高压缩比，使得它广泛地应用于多媒体和网络程序中，例如</SPAN><SPAN 
lang=EN-US>HTML</SPAN><SPAN style="FONT-FAMILY: 宋体">语法中选用的图象格式之一就是</SPAN><SPAN 
lang=EN-US>JPEG(</SPAN><SPAN style="FONT-FAMILY: 宋体">另一种是</SPAN><SPAN 
lang=EN-US>GIF)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">。这是显然的，因为网络的带宽非常宝贵，选用一种高压缩比的文件格式是十分必要的。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>JPEG</SPAN><SPAN 
style="FONT-FAMILY: 宋体">有几种模式，其中最常用的是基于</SPAN><SPAN lang=EN-US>DCT</SPAN><SPAN 
style="FONT-FAMILY: 宋体">变换的顺序型模式，又称为基线系统</SPAN><SPAN 
lang=EN-US>(Baseline)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，以下将针对这种格式进行讨论。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><B><SPAN lang=EN-US>1.<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN></B><B><SPAN lang=EN-US>JPEG</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">的压缩原理</SPAN><SPAN lang=EN-US></SPAN></B></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>JPEG</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的压缩原理其实上面介绍的那些原理的综合，博采众家之长，这也正是</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN 
style="FONT-FAMILY: 宋体">有高压缩比的原因。其编码器的流程为：</SPAN></P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><SPAN 
lang=EN-US><IMG height=91 src="第9章 图象的压缩编码，JPEG压缩编码标准.files/image003.gif" 
width=505 v:shapes="_x0000_i1027"> </SPAN></P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
style="FONT-FAMILY: 宋体">图</SPAN>9.3&nbsp;&nbsp;&nbsp;&nbsp; JPEG</B><B><SPAN 
style="FONT-FAMILY: 宋体">编码器流程</SPAN><SPAN lang=EN-US></SPAN></B></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">解码器基本上为上述过程的逆过程：</SPAN></P>
<P class=a style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US><IMG height=114 
src="第9章 图象的压缩编码，JPEG压缩编码标准.files/image004.gif" width=544 
v:shapes="_x0000_i1028"> </SPAN></P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
style="FONT-FAMILY: 宋体">图</SPAN>9.4&nbsp;&nbsp;&nbsp;&nbsp; </B><B><SPAN 
style="FONT-FAMILY: 宋体">解码器流程</SPAN><SPAN lang=EN-US></SPAN></B></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>8</SPAN><SPAN 
style="FONT-FAMILY: 宋体">×</SPAN><SPAN lang=EN-US>8</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的图象经过</SPAN><SPAN lang=EN-US>DCT</SPAN><SPAN 
style="FONT-FAMILY: 宋体">变换后，其低频分量都集中在左上角，高频分量分布在右下角</SPAN><SPAN 
lang=EN-US>(DCT</SPAN><SPAN style="FONT-FAMILY: 宋体">变换实际上是空间域的低通滤波器</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">。由于该低频分量包含了图象的主要信息</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">如亮度</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，而高频与之相比，就不那么重要了，所以我们可以忽略高频分量，从而达到压缩的目的。如何将高频分量去掉，这就要用到量化，它是产生信息损失的根源。这里的量化操作，就是将某一个值除以量化表中对应的值。由于量化表左上角的值较小，右上角的值较大，这样就起到了保持低频分量，抑制高频分量的目的。</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN style="FONT-FAMILY: 宋体">使用的颜色是</SPAN><SPAN 
lang=EN-US>YUV</SPAN><SPAN style="FONT-FAMILY: 宋体">格式。我们提到过，</SPAN><SPAN 
lang=EN-US>Y</SPAN><SPAN style="FONT-FAMILY: 宋体">分量代表了亮度信息，</SPAN><SPAN 
lang=EN-US>UV</SPAN><SPAN style="FONT-FAMILY: 宋体">分量代表了色差信息。相比而言，</SPAN><SPAN 
lang=EN-US>Y</SPAN><SPAN style="FONT-FAMILY: 宋体">分量更重要一些。我们可以对</SPAN><SPAN 
lang=EN-US>Y</SPAN><SPAN style="FONT-FAMILY: 宋体">采用细量化，对</SPAN><SPAN 
lang=EN-US>UV</SPAN><SPAN 
style="FONT-FAMILY: 宋体">采用粗量化，可进一步提高压缩比。所以上面所说的量化表通常有两张，一张是针对</SPAN><SPAN 
lang=EN-US>Y</SPAN><SPAN style="FONT-FAMILY: 宋体">的；一张是针对</SPAN><SPAN 
lang=EN-US>UV</SPAN><SPAN style="FONT-FAMILY: 宋体">的。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">上面讲了，经过</SPAN><SPAN 
lang=EN-US>DCT</SPAN><SPAN style="FONT-FAMILY: 宋体">变换后，低频分量集中在左上角，其中</SPAN><SPAN 
lang=EN-US>F(0</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>0)(</SPAN><SPAN style="FONT-FAMILY: 宋体">即第一行第一列元素</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">代表了直流</SPAN><SPAN 
lang=EN-US>(DC)</SPAN><SPAN style="FONT-FAMILY: 宋体">系数，即</SPAN><SPAN 
lang=EN-US>8</SPAN><SPAN style="FONT-FAMILY: 宋体">×</SPAN><SPAN 
lang=EN-US>8</SPAN><SPAN 
style="FONT-FAMILY: 宋体">子块的平均值，要对它单独编码。由于两个相邻的</SPAN><SPAN 
lang=EN-US>8</SPAN><SPAN style="FONT-FAMILY: 宋体">×</SPAN><SPAN 
lang=EN-US>8</SPAN><SPAN style="FONT-FAMILY: 宋体">子块的</SPAN><SPAN 
lang=EN-US>DC</SPAN><SPAN style="FONT-FAMILY: 宋体">系数相差很小，所以对它们采用差分编码</SPAN><SPAN 
lang=EN-US>DPCM</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，可以提高压缩比，也就是说对相邻的子块</SPAN><SPAN 
lang=EN-US>DC</SPAN><SPAN style="FONT-FAMILY: 宋体">系数的差值进行编码。</SPAN><SPAN 
lang=EN-US>8</SPAN><SPAN style="FONT-FAMILY: 宋体">×</SPAN><SPAN 
lang=EN-US>8</SPAN><SPAN style="FONT-FAMILY: 宋体">的其它</SPAN><SPAN 
lang=EN-US>63</SPAN><SPAN style="FONT-FAMILY: 宋体">个元素是交流</SPAN><SPAN 
lang=EN-US>(AC)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">系数，采用行程编码。这里出现一个问题：这</SPAN><SPAN 
lang=EN-US>63</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个系数应该按照怎么样的顺序排列？为了保证低频分量先出现，高频分量后出现，以增加行程中连续“</SPAN><SPAN 
lang=EN-US>0</SPAN><SPAN style="FONT-FAMILY: 宋体">”的个数，这</SPAN><SPAN 
lang=EN-US>63</SPAN><SPAN style="FONT-FAMILY: 宋体">个元素采用了“之”字型</SPAN><SPAN 
lang=EN-US>(Zig-Zag)</SPAN><SPAN style="FONT-FAMILY: 宋体">的排列方法，如图</SPAN><SPAN 
lang=EN-US>9.5</SPAN><SPAN style="FONT-FAMILY: 宋体">所示。</SPAN></P>
<P class=a style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US><IMG height=214 
src="第9章 图象的压缩编码，JPEG压缩编码标准.files/image006.gif" width=227 
v:shapes="_x0000_i1029"> </SPAN></P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
style="FONT-FAMILY: 宋体">图</SPAN>9.5&nbsp;&nbsp;&nbsp;&nbsp; Zig-Zag</B></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">这</SPAN><SPAN 
lang=EN-US>63</SPAN><SPAN style="FONT-FAMILY: 宋体">个</SPAN><SPAN 
lang=EN-US>AC</SPAN><SPAN 
style="FONT-FAMILY: 宋体">系数行程编码的码字用两个字节表示，如图</SPAN><SPAN 
lang=EN-US>9.6</SPAN><SPAN style="FONT-FAMILY: 宋体">所示。</SPAN></P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><SPAN 
lang=EN-US><IMG height=183 src="第9章 图象的压缩编码，JPEG压缩编码标准.files/image007.gif" 
width=443 v:shapes="_x0000_i1030"> </SPAN></P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
style="FONT-FAMILY: 宋体">图</SPAN>9.6&nbsp;&nbsp;&nbsp;&nbsp; </B><B><SPAN 
style="FONT-FAMILY: 宋体">行程编码</SPAN><SPAN lang=EN-US></SPAN></B></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">上面，我们得到了</SPAN><SPAN 
lang=EN-US>DC</SPAN><SPAN style="FONT-FAMILY: 宋体">码字和</SPAN><SPAN lang=EN-US> 
AC</SPAN><SPAN 
style="FONT-FAMILY: 宋体">行程码字。为了进一步提高压缩比，需要对其再进行熵编码，这里选用</SPAN><SPAN 
lang=EN-US>Huffman</SPAN><SPAN style="FONT-FAMILY: 宋体">编码，分成两步：</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(1)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">熵编码的中间格式表示</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">对于</SPAN><SPAN 
lang=EN-US>AC</SPAN><SPAN style="FONT-FAMILY: 宋体">系数，有两个符号。符号</SPAN><SPAN 
lang=EN-US>1</SPAN><SPAN style="FONT-FAMILY: 宋体">为行程和尺寸，即上面的</SPAN><SPAN 
lang=EN-US>(RunLength</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>Size)</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN><SPAN 
lang=EN-US>(0</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>0)</SPAN><SPAN style="FONT-FAMILY: 宋体">和</SPAN><SPAN 
lang=EN-US>(15</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>0)</SPAN><SPAN style="FONT-FAMILY: 宋体">是两个比较特殊的情况。</SPAN><SPAN 
lang=EN-US>(0</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>0)</SPAN><SPAN style="FONT-FAMILY: 宋体">表示块结束标志</SPAN><SPAN 
lang=EN-US>(EOB)</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>(15</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>0)</SPAN><SPAN style="FONT-FAMILY: 宋体">表示</SPAN><SPAN 
lang=EN-US>ZRL</SPAN><SPAN style="FONT-FAMILY: 宋体">，当行程长度超过</SPAN><SPAN 
lang=EN-US>15</SPAN><SPAN style="FONT-FAMILY: 宋体">时，用增加</SPAN><SPAN 
lang=EN-US>ZRL</SPAN><SPAN style="FONT-FAMILY: 宋体">的个数来解决，所以最多有三个</SPAN><SPAN 
lang=EN-US>ZRL(3</SPAN><SPAN style="FONT-FAMILY: 宋体">×</SPAN><SPAN 
lang=EN-US>16+15=63)</SPAN><SPAN style="FONT-FAMILY: 宋体">。符号</SPAN><SPAN 
lang=EN-US>2</SPAN><SPAN style="FONT-FAMILY: 宋体">为幅度值</SPAN><SPAN 
lang=EN-US>(Amplitude)</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">对于</SPAN><SPAN 
lang=EN-US>DC</SPAN><SPAN style="FONT-FAMILY: 宋体">系数，也有两个符号。符号</SPAN><SPAN 
lang=EN-US>1</SPAN><SPAN style="FONT-FAMILY: 宋体">为尺寸</SPAN><SPAN 
lang=EN-US>(Size)</SPAN><SPAN style="FONT-FAMILY: 宋体">；符号</SPAN><SPAN 
lang=EN-US>2</SPAN><SPAN style="FONT-FAMILY: 宋体">为幅度值</SPAN><SPAN 
lang=EN-US>(Amplitude)</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(2)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">熵编码</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">对于</SPAN><SPAN 
lang=EN-US>AC</SPAN><SPAN style="FONT-FAMILY: 宋体">系数，符号</SPAN><SPAN 
lang=EN-US>1</SPAN><SPAN style="FONT-FAMILY: 宋体">和符号</SPAN><SPAN 
lang=EN-US>2</SPAN><SPAN style="FONT-FAMILY: 宋体">分别进行编码。零行程长度超过</SPAN><SPAN 
lang=EN-US>15</SPAN><SPAN style="FONT-FAMILY: 宋体">个时，有一个符号</SPAN><SPAN 
lang=EN-US>(15</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>0)</SPAN><SPAN style="FONT-FAMILY: 宋体">，块结束时只有一个符号</SPAN><SPAN 
lang=EN-US>(0</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>0)</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">对符号</SPAN><SPAN 
lang=EN-US>1</SPAN><SPAN style="FONT-FAMILY: 宋体">进行</SPAN><SPAN 
lang=EN-US>Hufffman</SPAN><SPAN style="FONT-FAMILY: 宋体">编码</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">亮度，色差的</SPAN><SPAN 
lang=EN-US>Huffman</SPAN><SPAN style="FONT-FAMILY: 宋体">码表不同</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">。对符号</SPAN><SPAN 
lang=EN-US>2</SPAN><SPAN style="FONT-FAMILY: 宋体">进行变长整数</SPAN><SPAN 
lang=EN-US>VLI</SPAN><SPAN style="FONT-FAMILY: 宋体">编码。举例来说：</SPAN><SPAN 
lang=EN-US>Size=6</SPAN><SPAN style="FONT-FAMILY: 宋体">时，</SPAN><SPAN 
lang=EN-US>Amplitude</SPAN><SPAN style="FONT-FAMILY: 宋体">的范围是</SPAN><SPAN 
lang=EN-US>-63~-32</SPAN><SPAN style="FONT-FAMILY: 宋体">，以及</SPAN><SPAN 
lang=EN-US>32~63</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，对绝对值相同，符号相反的码字之间为反码关系。所以</SPAN><SPAN 
lang=EN-US>AC</SPAN><SPAN style="FONT-FAMILY: 宋体">系数为</SPAN><SPAN 
lang=EN-US>32</SPAN><SPAN style="FONT-FAMILY: 宋体">的码字为</SPAN><SPAN 
lang=EN-US>100000</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>33</SPAN><SPAN style="FONT-FAMILY: 宋体">的码字为</SPAN><SPAN 
lang=EN-US>100001</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>-32</SPAN><SPAN style="FONT-FAMILY: 宋体">的码字为</SPAN><SPAN 
lang=EN-US>011111</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>-33</SPAN><SPAN style="FONT-FAMILY: 宋体">的码字为</SPAN><SPAN 
lang=EN-US>011110</SPAN><SPAN style="FONT-FAMILY: 宋体">。符号</SPAN><SPAN 
lang=EN-US>2</SPAN><SPAN style="FONT-FAMILY: 宋体">的码字紧接于符号</SPAN><SPAN 
lang=EN-US>1</SPAN><SPAN style="FONT-FAMILY: 宋体">的码字之后。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">对于</SPAN><SPAN 
lang=EN-US>DC</SPAN><SPAN style="FONT-FAMILY: 宋体">系数，</SPAN><SPAN 
lang=EN-US>Y</SPAN><SPAN style="FONT-FAMILY: 宋体">和</SPAN><SPAN 
lang=EN-US>UV</SPAN><SPAN style="FONT-FAMILY: 宋体">的</SPAN><SPAN 
lang=EN-US>Huffman</SPAN><SPAN style="FONT-FAMILY: 宋体">码表也不同。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">掉了这么半天的书包，你可能已经晕了，呵呵。举个例子来说明上述过程就容易明白了。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">下面为</SPAN><SPAN 
lang=EN-US>8</SPAN><SPAN style="FONT-FAMILY: 宋体">×</SPAN><SPAN 
lang=EN-US>8</SPAN><SPAN style="FONT-FAMILY: 宋体">的亮度</SPAN><SPAN 
lang=EN-US>(Y)</SPAN><SPAN style="FONT-FAMILY: 宋体">图象子块经过量化后的系数。</SPAN></P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" 
align=center>15&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; -1&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0</P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" 
align=center>-2&nbsp;&nbsp;&nbsp; -1&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0</P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" 
align=center>-1&nbsp;&nbsp;&nbsp; -1&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0</P>
<P class=a style="LINE-HEIGHT: 18pt">0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0</P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" 
align=center>0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0</P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" 
align=center>0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0</P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" 
align=center>0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0</P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" 
align=center>0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 
0&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 0</P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">可见量化后只有左上角的几个点</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">低频分量</SPAN><SPAN lang=EN-US>)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">不为零，这样采用行程编码就很有效。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">第一步，熵编码的中间格式表示：先看</SPAN><SPAN lang=EN-US>DC</SPAN><SPAN 
style="FONT-FAMILY: 宋体">系数。假设前一个</SPAN><SPAN lang=EN-US>8</SPAN><SPAN 
style="FONT-FAMILY: 宋体">×</SPAN><SPAN lang=EN-US>8</SPAN><SPAN 
style="FONT-FAMILY: 宋体">子块</SPAN><SPAN lang=EN-US>DC</SPAN><SPAN 
style="FONT-FAMILY: 宋体">系数的量化值为</SPAN><SPAN lang=EN-US>12</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，则本块</SPAN><SPAN lang=EN-US>DC</SPAN><SPAN 
style="FONT-FAMILY: 宋体">系数与它的差为</SPAN><SPAN lang=EN-US>3</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，根据下表</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Amplitude</P>
<P 
style="LINE-HEIGHT: 18pt">0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0</P>
<P 
style="LINE-HEIGHT: 18pt">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C1,1</P>
<P 
style="LINE-HEIGHT: 18pt">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C3,-2,2,3</P>
<P 
style="LINE-HEIGHT: 18pt">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C7~-4<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>4~7</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C15~-8<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>8~15</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C31~-16<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>16~31</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C63~-32<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>32~63</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C127~-64<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>64~127</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C255~-128<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>128~255</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C511~-256<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>256~511</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C1023~512<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>512~1023</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C2047~-1024<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>1024~2047</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">查表得</SPAN><SPAN 
lang=EN-US>Size=2</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>Amplitude=3</SPAN><SPAN style="FONT-FAMILY: 宋体">，所以</SPAN><SPAN 
lang=EN-US>DC</SPAN><SPAN style="FONT-FAMILY: 宋体">中间格式为</SPAN><SPAN 
lang=EN-US>(2)(3)</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">下面对</SPAN><SPAN 
lang=EN-US>AC</SPAN><SPAN style="FONT-FAMILY: 宋体">系数编码。经过</SPAN><SPAN 
lang=EN-US>Zig-Zag</SPAN><SPAN 
style="FONT-FAMILY: 宋体">扫描后，遇到的第一个非零系数为</SPAN><SPAN lang=EN-US>-2</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，其中遇到零的个数为</SPAN><SPAN lang=EN-US>1(</SPAN><SPAN 
style="FONT-FAMILY: 宋体">即</SPAN><SPAN lang=EN-US>RunLength)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，根据下面这张</SPAN><SPAN lang=EN-US>AC</SPAN><SPAN 
style="FONT-FAMILY: 宋体">系数表：</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">Size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Amplitude</P>
<P 
style="LINE-HEIGHT: 18pt">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C1,1</P>
<P 
style="LINE-HEIGHT: 18pt">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C3,-2,2,3</P>
<P 
style="LINE-HEIGHT: 18pt">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C7~-4<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>4~7</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C15~-8<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>8~15</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C31~-16<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>16~31</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C63~-32<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>32~63</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C127~-64<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>64~127</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C255~-128<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>128~255</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C511~-256<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>256~511</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C1023~512<SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>512~1023</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">查表得</SPAN><SPAN 
lang=EN-US>Size=2</SPAN><SPAN style="FONT-FAMILY: 宋体">。所以</SPAN><SPAN 
lang=EN-US>RunLength=1,Size=2,Amplitude=3</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，所以</SPAN><SPAN lang=EN-US>AC</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中间格式为</SPAN><SPAN lang=EN-US>(1,2)(-2)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">其余的点类似，可以求得这个</SPAN><SPAN lang=EN-US>8</SPAN><SPAN 
style="FONT-FAMILY: 宋体">×</SPAN><SPAN lang=EN-US>8</SPAN><SPAN 
style="FONT-FAMILY: 宋体">子块熵编码的中间格式为</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
lang=EN-US>(DC)(2)(3),(1,2)(-2),(0,1)(-1),(0,1)(-1),(0,1)(-1),(2,1)(-1),(EOB)(0,0)</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">第二步，熵编码：</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">对于</SPAN><SPAN 
lang=EN-US>(2)(3)</SPAN><SPAN style="FONT-FAMILY: 宋体">：</SPAN><SPAN 
lang=EN-US>2</SPAN><SPAN style="FONT-FAMILY: 宋体">查</SPAN><SPAN 
lang=EN-US>DC</SPAN><SPAN style="FONT-FAMILY: 宋体">亮度</SPAN><SPAN 
lang=EN-US>Huffman</SPAN><SPAN style="FONT-FAMILY: 宋体">表得到</SPAN><SPAN 
lang=EN-US>11</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>3</SPAN><SPAN style="FONT-FAMILY: 宋体">经过</SPAN><SPAN 
lang=EN-US>VLI</SPAN><SPAN style="FONT-FAMILY: 宋体">编码为</SPAN><SPAN 
lang=EN-US>011</SPAN><SPAN style="FONT-FAMILY: 宋体">；</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">对于</SPAN><SPAN 
lang=EN-US>(1,2)(-2)</SPAN><SPAN style="FONT-FAMILY: 宋体">：</SPAN><SPAN 
lang=EN-US>(1,2)</SPAN><SPAN style="FONT-FAMILY: 宋体">查</SPAN><SPAN 
lang=EN-US>AC</SPAN><SPAN style="FONT-FAMILY: 宋体">亮度</SPAN><SPAN 
lang=EN-US>Huffman</SPAN><SPAN style="FONT-FAMILY: 宋体">表得到</SPAN><SPAN 
lang=EN-US>11011</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>-2</SPAN><SPAN style="FONT-FAMILY: 宋体">是</SPAN><SPAN 
lang=EN-US>2</SPAN><SPAN style="FONT-FAMILY: 宋体">的反码，为</SPAN><SPAN 
lang=EN-US>01</SPAN><SPAN style="FONT-FAMILY: 宋体">；</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">对于</SPAN><SPAN 
lang=EN-US>(0,1)(-1)</SPAN><SPAN style="FONT-FAMILY: 宋体">：</SPAN><SPAN 
lang=EN-US>(0,1)</SPAN><SPAN style="FONT-FAMILY: 宋体">查</SPAN><SPAN 
lang=EN-US>AC</SPAN><SPAN style="FONT-FAMILY: 宋体">亮度</SPAN><SPAN 
lang=EN-US>Huffman</SPAN><SPAN style="FONT-FAMILY: 宋体">表得到</SPAN><SPAN 
lang=EN-US>00</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>-1</SPAN><SPAN style="FONT-FAMILY: 宋体">是</SPAN><SPAN 
lang=EN-US>1</SPAN><SPAN style="FONT-FAMILY: 宋体">的反码，为</SPAN><SPAN 
lang=EN-US>0</SPAN><SPAN style="FONT-FAMILY: 宋体">；</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>……</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">最后，这一</SPAN><SPAN 
lang=EN-US>8</SPAN><SPAN style="FONT-FAMILY: 宋体">×</SPAN><SPAN 
lang=EN-US>8</SPAN><SPAN style="FONT-FAMILY: 宋体">子块亮度信息压缩后的数据流为</SPAN><SPAN 
lang=EN-US>11011, 1101101, 000, 000, 000, 111000,1010</SPAN><SPAN 
style="FONT-FAMILY: 宋体">。总共</SPAN><SPAN lang=EN-US>31</SPAN><SPAN 
style="FONT-FAMILY: 宋体">比特，其压缩比是</SPAN><SPAN lang=EN-US>64</SPAN><SPAN 
style="FONT-FAMILY: 宋体">×</SPAN><SPAN lang=EN-US>8/31=16.5</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，大约每个象素用半个比特。</SPAN></P>
<P class=MsoBodyTextFirstIndent style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">可以想见，压缩比和图象质量是呈反比的，以下是压缩效率与图象质量之间的大致关系，可以根据你的需要，选择合适的压缩比。</SPAN></P>
<P class=MsoBodyTextFirstIndent style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" 
align=center><B><SPAN style="FONT-FAMILY: 宋体">表</SPAN>9.1&nbsp;&nbsp;&nbsp; 
</B><B><SPAN style="FONT-FAMILY: 宋体">压缩比与图象质量的关系</SPAN><SPAN 
lang=EN-US></SPAN></B></P>
<TABLE cellSpacing=0 cellPadding=0 border=1>
  <TBODY>
  <TR>
    <TD class=Normal vAlign=top width=284>
      <P style="LINE-HEIGHT: 18pt"><SPAN 
      style="FONT-FAMILY: 宋体">压缩效率</SPAN><SPAN lang=EN-US>(</SPAN><SPAN 
      style="FONT-FAMILY: 宋体">单位：</SPAN><SPAN 
    lang=EN-US>bits/pixel)</SPAN></P></TD>
    <TD class=Normal vAlign=top width=284>
      <P style="LINE-HEIGHT: 18pt"><SPAN 
    style="FONT-FAMILY: 宋体">图象质量</SPAN></P></TD></TR>
  <TR>
    <TD class=Normal vAlign=top width=284>
      <P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>0.25~0.50</SPAN></P></TD>
    <TD class=Normal vAlign=top width=284>
      <P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">中</SPAN><SPAN 
      lang=EN-US>~</SPAN><SPAN 
style="FONT-FAMILY: 宋体">好，可满足某些应用</SPAN></P></TD></TR>
  <TR>
    <TD class=Normal vAlign=top width=284>
      <P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>0.50~0.75</SPAN></P></TD>
    <TD class=Normal vAlign=top width=284>
      <P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">好</SPAN><SPAN 
      lang=EN-US>~</SPAN><SPAN 
style="FONT-FAMILY: 宋体">很好，满足多数应用</SPAN></P></TD></TR>
  <TR>
    <TD class=Normal vAlign=top width=284>
      <P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>0.75~1.5</SPAN></P></TD>
    <TD class=Normal vAlign=top width=284>
      <P style="LINE-HEIGHT: 18pt"><SPAN 
      style="FONT-FAMILY: 宋体">极好，满足大多数应用</SPAN></P></TD></TR>
  <TR>
    <TD class=Normal vAlign=top width=284>
      <P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>1.5~2.0</SPAN></P></TD>
    <TD class=Normal vAlign=top width=284>
      <P style="LINE-HEIGHT: 18pt"><SPAN 
      style="FONT-FAMILY: 宋体">与原始图象几乎一样</SPAN></P></TD></TR></TBODY></TABLE>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">以上我们介绍了</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN style="FONT-FAMILY: 宋体">压缩的原理，其中</SPAN><SPAN 
lang=EN-US>DC</SPAN><SPAN style="FONT-FAMILY: 宋体">系数使用了预测编码</SPAN><SPAN 
lang=EN-US>DPCM</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>AC</SPAN><SPAN style="FONT-FAMILY: 宋体">系数使用了变换编码</SPAN><SPAN 
lang=EN-US>DCT</SPAN><SPAN style="FONT-FAMILY: 宋体">，二者都使用了熵编码</SPAN><SPAN 
lang=EN-US>Huffman</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，可见几乎所有传统的压缩方法在这里都用到了。这几种方法的结合正是产生</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN 
style="FONT-FAMILY: 宋体">高压缩比的原因。顺便说一下，该标准是</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN 
style="FONT-FAMILY: 宋体">小组从很多种不同中方案中比较测试得到的，并非空穴来风。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">上面介绍了</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN style="FONT-FAMILY: 宋体">压缩的基本原理，下面介绍一下</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN style="FONT-FAMILY: 宋体">的文件格式。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><B><SPAN lang=EN-US>2.<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN></B><B><SPAN lang=EN-US>JPEG</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">的文件格式</SPAN><SPAN lang=EN-US></SPAN></B></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>JPEG</SPAN><SPAN 
style="FONT-FAMILY: 宋体">文件大体上可以分成以下两个部分：标记码</SPAN><SPAN 
lang=EN-US>(Tag)</SPAN><SPAN style="FONT-FAMILY: 宋体">加压缩数据。先介绍标记码部分。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">标记码部分给出了</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN style="FONT-FAMILY: 宋体">图象的所有信息</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">有点类似于</SPAN><SPAN 
lang=EN-US>BMP</SPAN><SPAN style="FONT-FAMILY: 宋体">中的头信息，但要复杂的多</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">，如图象的宽、高、</SPAN><SPAN 
lang=EN-US>Huffman</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表、量化表等等。标记码有很多，但绝大多数的</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN style="FONT-FAMILY: 宋体">文件只包含几种。标记码的结构为：</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>SOI</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>DQT</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>DRI</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>SOF0</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>DHT</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>SOS</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>…</P>
<P 
style="LINE-HEIGHT: 18pt"><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>EOI</P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">标记码由两个字节组成，高字节为</SPAN><SPAN lang=EN-US>0XFF</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，每个标记码之前可以填上个数不限的填充字节</SPAN><SPAN 
lang=EN-US>0XFF</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">下面介绍一些常用的标记码的结构及其含义。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(1)SOI(Start of Image)</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">标记结构</SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">字节数</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">0XFF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">0XD8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">可作为</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN style="FONT-FAMILY: 宋体">格式的判据</SPAN><SPAN 
lang=EN-US>(JFIF</SPAN><SPAN style="FONT-FAMILY: 宋体">还需要</SPAN><SPAN 
lang=EN-US>APP0</SPAN><SPAN style="FONT-FAMILY: 宋体">的配合</SPAN><SPAN 
lang=EN-US>)</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(2)APP0(Application)</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">标记结构</SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">字节数</SPAN><SPAN>&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">意义</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">0XFF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">0XE0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">Lp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; APP0<SPAN 
style="FONT-FAMILY: 宋体">标记码长度，不包括前两个字节</SPAN><SPAN lang=EN-US>0XFF</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>0XE0</SPAN></P>
<P style="LINE-HEIGHT: 18pt">Identifier 
5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JFIF<SPAN 
style="FONT-FAMILY: 宋体">识别码</SPAN><SPAN lang=EN-US> 0X4A</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>0X46</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>0X49</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>0X46</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>0X00</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">Version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JFIF<SPAN 
style="FONT-FAMILY: 宋体">版本号</SPAN> <SPAN style="FONT-FAMILY: 宋体">可为</SPAN><SPAN 
lang=EN-US>0X0101</SPAN><SPAN style="FONT-FAMILY: 宋体">或者</SPAN><SPAN 
lang=EN-US>0X0102</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">Units&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">单位，等于零时表示未指定，为</SPAN><SPAN lang=EN-US>1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示英寸，为</SPAN><SPAN lang=EN-US>2</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">厘米</SPAN></P>
<P style="LINE-HEIGHT: 18pt">Xdensity&nbsp; 
2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">水平分辨率</SPAN></P>
<P style="LINE-HEIGHT: 18pt">Ydensity&nbsp; 
2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">垂直分辨率</SPAN></P>
<P style="LINE-HEIGHT: 18pt">Xthumbnail&nbsp;&nbsp;&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">水平点数</SPAN></P>
<P style="LINE-HEIGHT: 18pt">Ythumbnail&nbsp;&nbsp;&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">垂直点数</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">RGB0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RGB<SPAN 
style="FONT-FAMILY: 宋体">的值</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">RGB1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RGB<SPAN 
style="FONT-FAMILY: 宋体">的值</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>…</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">RGBn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RGB<SPAN 
style="FONT-FAMILY: 宋体">的值，</SPAN><SPAN 
lang=EN-US>n=Xthumbnail*Ythumbnail</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>APP0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">是</SPAN><SPAN lang=EN-US>JPEG</SPAN><SPAN 
style="FONT-FAMILY: 宋体">保留给</SPAN><SPAN lang=EN-US>Application</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所使用的标记码，而</SPAN><SPAN lang=EN-US>JFIF</SPAN><SPAN 
style="FONT-FAMILY: 宋体">将文件的相关信息定义在此标记中。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(3)DQT(Define Quantization 
Table)</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">标记结构</SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">字节数</SPAN><SPAN>&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">意义</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">0XFF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">0XDB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">Lq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DQT<SPAN 
style="FONT-FAMILY: 宋体">标记码长度，不包括前两个字节</SPAN><SPAN lang=EN-US>0XFF</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>0XDB</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">(Pq,Tq)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">高四位</SPAN><SPAN lang=EN-US>Pq</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为量化表的数据精确度，</SPAN><SPAN lang=EN-US>Pq=0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时，</SPAN><SPAN lang=EN-US>Q0~Qn</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">值为</SPAN><SPAN 
lang=EN-US>8</SPAN><SPAN style="FONT-FAMILY: 宋体">位，</SPAN><SPAN 
lang=EN-US>Pq=1</SPAN><SPAN style="FONT-FAMILY: 宋体">时，</SPAN><SPAN 
lang=EN-US>Qt</SPAN><SPAN style="FONT-FAMILY: 宋体">的值为</SPAN><SPAN 
lang=EN-US>16</SPAN><SPAN style="FONT-FAMILY: 宋体">位，</SPAN><SPAN 
lang=EN-US>Tq</SPAN><SPAN style="FONT-FAMILY: 宋体">表示量化表的</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">编号，为</SPAN><SPAN 
lang=EN-US>0~3</SPAN><SPAN style="FONT-FAMILY: 宋体">。在基本系统中，</SPAN><SPAN 
lang=EN-US>Pq=0</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>Tq=0~1</SPAN><SPAN style="FONT-FAMILY: 宋体">，也就是</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">说最多有两个量化表。</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">Q0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1<SPAN style="FONT-FAMILY: 宋体">或</SPAN>2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">量化表的值，</SPAN><SPAN lang=EN-US>Pq=0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时；为一个字节，</SPAN><SPAN lang=EN-US>Pq=1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时，为两个</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">字节</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">Q1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1<SPAN style="FONT-FAMILY: 宋体">或</SPAN>2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">量化表的值，</SPAN><SPAN lang=EN-US>Pq=0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时；为一个字节，</SPAN><SPAN lang=EN-US>Pq=1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时，为两个</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">字节</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>…</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">Qn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1<SPAN style="FONT-FAMILY: 宋体">或</SPAN>2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">量化表的值，</SPAN><SPAN lang=EN-US>Pq=0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时，为一个字节；</SPAN><SPAN lang=EN-US>Pq=1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时，为两个</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">字节。</SPAN><SPAN 
lang=EN-US>n</SPAN><SPAN style="FONT-FAMILY: 宋体">的值为</SPAN><SPAN 
lang=EN-US>0~63</SPAN><SPAN style="FONT-FAMILY: 宋体">，表示量化表中</SPAN><SPAN 
lang=EN-US>64</SPAN><SPAN style="FONT-FAMILY: 宋体">个值</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">之字形排</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">列</SPAN><SPAN 
lang=EN-US>)</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(4)DRI(Define Restart 
Interval)</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">此标记需要用到最小编码单元</SPAN><SPAN lang=EN-US>(MCU</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>Minimum Coding 
Unit)</SPAN><SPAN style="FONT-FAMILY: 宋体">的概念。前面提到，</SPAN><SPAN 
lang=EN-US>Y</SPAN><SPAN style="FONT-FAMILY: 宋体">分量数据重要，</SPAN><SPAN 
lang=EN-US>UV</SPAN><SPAN style="FONT-FAMILY: 宋体">分量的数据相对不重要，所以可以只取</SPAN><SPAN 
lang=EN-US>UV</SPAN><SPAN style="FONT-FAMILY: 宋体">的一部分，以增加压缩比。目前支持</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN style="FONT-FAMILY: 宋体">格式的软件通常提供两种取样方式</SPAN><SPAN 
lang=EN-US>YUV411</SPAN><SPAN style="FONT-FAMILY: 宋体">和</SPAN><SPAN 
lang=EN-US>YUV422</SPAN><SPAN style="FONT-FAMILY: 宋体">，其含义是</SPAN><SPAN 
lang=EN-US>YUV</SPAN><SPAN 
style="FONT-FAMILY: 宋体">三个分量的数据取样比例。举例来说，如果</SPAN><SPAN lang=EN-US>Y</SPAN><SPAN 
style="FONT-FAMILY: 宋体">取四个数据单元，即水平取样因子</SPAN><SPAN lang=EN-US>Hy</SPAN><SPAN 
style="FONT-FAMILY: 宋体">乘以垂直取样因子</SPAN><SPAN lang=EN-US>Vy</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的值为</SPAN><SPAN lang=EN-US>4</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，而</SPAN><SPAN lang=EN-US>U</SPAN><SPAN 
style="FONT-FAMILY: 宋体">和</SPAN><SPAN lang=EN-US>V</SPAN><SPAN 
style="FONT-FAMILY: 宋体">各取一个数据单元，即</SPAN><SPAN 
lang=EN-US>Hu×Vu=1,Hv×Vv=1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">。那么这种部分取样就称为</SPAN><SPAN lang=EN-US>YUV411</SPAN><SPAN 
style="FONT-FAMILY: 宋体">。如图</SPAN><SPAN lang=EN-US>9.7</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所示：</SPAN></P>
<TABLE cellSpacing=0 cellPadding=0 border=0>
  <TBODY>
  <TR>
    <TD class=Normal vAlign=top width=276>
      <P class=a style="LINE-HEIGHT: 18pt"><B><SPAN lang=EN-US><IMG height=89 
      src="第9章 图象的压缩编码，JPEG压缩编码标准.files/image009.jpg" width=197 
      v:shapes="_x0000_i1031"> </SPAN></B></P>
      <P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
      style="FONT-FAMILY: 宋体">图</SPAN>9.7&nbsp;&nbsp;&nbsp;&nbsp; 
      YUV411</B><B><SPAN style="FONT-FAMILY: 宋体">的示意图</SPAN><SPAN 
      lang=EN-US></SPAN></B></P></TD>
    <TD class=Normal vAlign=top width=276>
      <P class=a style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US><IMG height=90 
      src="第9章 图象的压缩编码，JPEG压缩编码标准.files/image011.gif" width=253 
      v:shapes="_x0000_i1032"> </SPAN></P>
      <P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
      style="FONT-FAMILY: 宋体">图</SPAN>9.8&nbsp;&nbsp;&nbsp;&nbsp; 
      YUV111</B><B><SPAN style="FONT-FAMILY: 宋体">的排列顺序</SPAN><SPAN 
      lang=EN-US></SPAN></B></P></TD></TR></TBODY></TABLE>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">易知</SPAN><SPAN 
lang=EN-US>YUV411</SPAN><SPAN style="FONT-FAMILY: 宋体">有</SPAN><SPAN 
lang=EN-US>50%</SPAN><SPAN style="FONT-FAMILY: 宋体">的压缩比</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">原来有</SPAN><SPAN 
lang=EN-US>12</SPAN><SPAN style="FONT-FAMILY: 宋体">个数据单元，现在有</SPAN><SPAN 
lang=EN-US>6</SPAN><SPAN style="FONT-FAMILY: 宋体">个数据单元</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>YUV422</SPAN><SPAN style="FONT-FAMILY: 宋体">有</SPAN><SPAN 
lang=EN-US>33%</SPAN><SPAN style="FONT-FAMILY: 宋体">的压缩比</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">原来有</SPAN><SPAN 
lang=EN-US>12</SPAN><SPAN style="FONT-FAMILY: 宋体">个数据单元，现在有</SPAN><SPAN 
lang=EN-US>8</SPAN><SPAN style="FONT-FAMILY: 宋体">个数据单元</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">那么你可能会想，</SPAN><SPAN 
lang=EN-US>YUV911</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>YUV1611</SPAN><SPAN 
style="FONT-FAMILY: 宋体">压缩比不是更高嘛？但是要考虑到图象质量的因素。所以</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN style="FONT-FAMILY: 宋体">标准规定了最小编码单元</SPAN><SPAN 
lang=EN-US>MCU</SPAN><SPAN style="FONT-FAMILY: 宋体">，要求</SPAN><SPAN 
lang=EN-US>Hy×Vy+Hu×Vu+Hv×Vv</SPAN><SPAN style="FONT-FAMILY: 宋体">≤</SPAN><SPAN 
lang=EN-US>10</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>MCU</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中块的排列方式与</SPAN><SPAN lang=EN-US>H</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>V</SPAN><SPAN 
style="FONT-FAMILY: 宋体">的值有密切关系，如图</SPAN><SPAN lang=EN-US>9.8</SPAN><SPAN 
style="FONT-FAMILY: 宋体">、图</SPAN><SPAN lang=EN-US>9.9</SPAN><SPAN 
style="FONT-FAMILY: 宋体">、图</SPAN><SPAN lang=EN-US>9.10</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所示。</SPAN></P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
lang=EN-US><IMG height=262 src="第9章 图象的压缩编码，JPEG压缩编码标准.files/image013.gif" 
width=336 v:shapes="_x0000_i1033"> </SPAN></B></P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
style="FONT-FAMILY: 宋体">图</SPAN>9.9&nbsp;&nbsp;&nbsp;&nbsp; YUV211</B><B><SPAN 
style="FONT-FAMILY: 宋体">的排列顺序</SPAN></B></P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
lang=EN-US><IMG height=199 src="第9章 图象的压缩编码，JPEG压缩编码标准.files/image015.gif" 
width=368 v:shapes="_x0000_i1034"> </SPAN></B></P>
<P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
style="FONT-FAMILY: 宋体">图</SPAN>9.10&nbsp;&nbsp; YUV411</B><B><SPAN 
style="FONT-FAMILY: 宋体">的排列顺序</SPAN></B></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">标记结构</SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">字节数</SPAN><SPAN>&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">意义</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">0XFF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">0XDD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">Lr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DRI<SPAN 
style="FONT-FAMILY: 宋体">标记码长度，不包括前两个字节</SPAN><SPAN lang=EN-US>0XFF</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>0XDD</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">Ri&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">重入间隔的</SPAN><SPAN lang=EN-US>MCU</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个数，</SPAN><SPAN lang=EN-US>Ri</SPAN><SPAN 
style="FONT-FAMILY: 宋体">必须是一</SPAN><SPAN lang=EN-US>MCU</SPAN><SPAN 
style="FONT-FAMILY: 宋体">行中</SPAN><SPAN lang=EN-US>MCU</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">个数的整数，最后一个零头不一定刚好是</SPAN><SPAN lang=EN-US>Ri</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个</SPAN><SPAN lang=EN-US>MCU</SPAN><SPAN 
style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">每个重入间隔各自独立编码。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(5)SOF(Start of Frame) 
</SPAN><SPAN style="FONT-FAMILY: 宋体">在基本系统中，只处理</SPAN><SPAN 
lang=EN-US>SOF0</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">标记结构</SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">字节数</SPAN><SPAN>&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">意义</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">0XFF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">0XC0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">Lf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SOF<SPAN 
style="FONT-FAMILY: 宋体">标记码长度，不包括前两个字节</SPAN><SPAN lang=EN-US>0XFF</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>0XC0</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">P&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">基本系统中，为</SPAN><SPAN lang=EN-US>0X08</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">Y&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">图象高度</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">X&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">图象宽度</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">Nf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Frame<SPAN 
style="FONT-FAMILY: 宋体">中的成分个数，一般为</SPAN><SPAN lang=EN-US>1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US>3</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">代表灰度图，</SPAN><SPAN lang=EN-US>3</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">代表真彩图</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">C1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">成分编号</SPAN><SPAN lang=EN-US>1</SPAN></P>
<P style="LINE-HEIGHT: 18pt">(H1,V1)&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">第一个水平和垂直采样因子</SPAN></P>
<P style="LINE-HEIGHT: 18pt">Tq1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">该量化表编号</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">C2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">成分编号</SPAN><SPAN lang=EN-US>2</SPAN></P>
<P style="LINE-HEIGHT: 18pt">(H2,V2)&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">第二个水平和垂直采样因子</SPAN></P>
<P style="LINE-HEIGHT: 18pt">Tq2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">该量化表编号</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>…</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">Cn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">成分编号</SPAN><SPAN lang=EN-US>n</SPAN></P>
<P style="LINE-HEIGHT: 18pt">(Hn,Vn)&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">第</SPAN><SPAN lang=EN-US>n</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个水平和垂直采样因子</SPAN></P>
<P style="LINE-HEIGHT: 18pt">Tqn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">该量化表编号</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(6)DHT(Define Huffman 
Table)</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">标记结构</SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">字节数</SPAN><SPAN>&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">意义</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">0XFF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">0XC4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">Lh&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DHT<SPAN 
style="FONT-FAMILY: 宋体">标记码长度，不包括前两个字节</SPAN><SPAN lang=EN-US>0XFF</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>0XC4</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">(Tc,Th)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </P>
<P 
style="LINE-HEIGHT: 18pt">L1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">L2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">…&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</P>
<P style="LINE-HEIGHT: 18pt">L16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">V1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">V2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>…</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">Vt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>Tc</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为高</SPAN><SPAN lang=EN-US>4</SPAN><SPAN 
style="FONT-FAMILY: 宋体">位，</SPAN><SPAN lang=EN-US>Th</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为低</SPAN><SPAN lang=EN-US>4</SPAN><SPAN 
style="FONT-FAMILY: 宋体">位。在基本系统中，</SPAN><SPAN lang=EN-US>Tc</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US>1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，为</SPAN><SPAN lang=EN-US>0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时，指</SPAN><SPAN lang=EN-US>DC</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所用的</SPAN><SPAN lang=EN-US>Huffman</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表，为</SPAN><SPAN lang=EN-US>1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">时，指</SPAN><SPAN lang=EN-US>AC</SPAN><SPAN 
style="FONT-FAMILY: 宋体">所用的</SPAN><SPAN lang=EN-US>Huffman</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表。</SPAN><SPAN lang=EN-US>Th</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示</SPAN><SPAN lang=EN-US>Huffman</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表的编号，在基本系统中，其值为</SPAN><SPAN lang=EN-US>0</SPAN><SPAN 
style="FONT-FAMILY: 宋体">或</SPAN><SPAN lang=EN-US>1</SPAN><SPAN 
style="FONT-FAMILY: 宋体">。所以，在基本系统中，最多有</SPAN><SPAN lang=EN-US>4</SPAN><SPAN 
style="FONT-FAMILY: 宋体">个</SPAN><SPAN lang=EN-US>Huffman</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表，如下所示：</SPAN></P>
<P style="LINE-HEIGHT: 18pt">Tc&nbsp;&nbsp; Th&nbsp;&nbsp; Huffman<SPAN 
style="FONT-FAMILY: 宋体">表编号</SPAN><SPAN lang=EN-US>(2×Tc+Th)</SPAN></P>
<P style="LINE-HEIGHT: 18pt">0&nbsp;&nbsp;&nbsp;&nbsp; 0</P>
<P style="LINE-HEIGHT: 18pt">1&nbsp;&nbsp;&nbsp;&nbsp; 1</P>
<P style="LINE-HEIGHT: 18pt">0&nbsp;&nbsp;&nbsp;&nbsp; 2</P>
<P style="LINE-HEIGHT: 18pt">1&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp; 
3</P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>Ln</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示每个</SPAN><SPAN lang=EN-US>n</SPAN><SPAN 
style="FONT-FAMILY: 宋体">比特的</SPAN><SPAN lang=EN-US>Huffman</SPAN><SPAN 
style="FONT-FAMILY: 宋体">码字的个数，</SPAN><SPAN lang=EN-US>n=1~16</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>Vt</SPAN><SPAN 
style="FONT-FAMILY: 宋体">表示每个</SPAN><SPAN lang=EN-US>Huffman</SPAN><SPAN 
style="FONT-FAMILY: 宋体">码字所对应的值，也就是我们前面所讲的符号</SPAN><SPAN 
lang=EN-US>1</SPAN><SPAN style="FONT-FAMILY: 宋体">，对</SPAN><SPAN 
lang=EN-US>DC</SPAN><SPAN style="FONT-FAMILY: 宋体">来说该值为</SPAN><SPAN 
lang=EN-US>(Size)</SPAN><SPAN style="FONT-FAMILY: 宋体">，对</SPAN><SPAN 
lang=EN-US>AC</SPAN><SPAN style="FONT-FAMILY: 宋体">来说该值为</SPAN><SPAN 
lang=EN-US>(RunLength</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>Size)</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>t=L1+L2+…L16</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(7)SOS(Start of Scan)</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">标记结构</SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">字节数</SPAN><SPAN>&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">意义</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">0XFF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">0XDA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">Ls&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DHT<SPAN 
style="FONT-FAMILY: 宋体">标记码长度，不包括前两个字节</SPAN><SPAN lang=EN-US>0XFF</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN><SPAN lang=EN-US>0XDA</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">Ns&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P style="LINE-HEIGHT: 18pt">Cs1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P style="LINE-HEIGHT: 18pt">(Td1,Ta1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</P>
<P style="LINE-HEIGHT: 18pt">Cs2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P style="LINE-HEIGHT: 18pt">(Td2,Ta2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>…</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">CsNs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P style="LINE-HEIGHT: 18pt">(TdNs,TaNs)&nbsp; 1</P>
<P 
style="LINE-HEIGHT: 18pt">Ss&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">Se&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>(Ah</SPAN><SPAN 
style="FONT-FAMILY: 宋体">，</SPAN>Al) 1</P>
<P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US>Ns</SPAN><SPAN 
style="FONT-FAMILY: 宋体">为</SPAN><SPAN lang=EN-US>Scan</SPAN><SPAN 
style="FONT-FAMILY: 宋体">中成分的个数，在基本系统中，</SPAN><SPAN 
lang=EN-US>Ns=Nf(Frame</SPAN><SPAN style="FONT-FAMILY: 宋体">中成分个数</SPAN><SPAN 
lang=EN-US>)</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN><SPAN 
lang=EN-US>CSNs</SPAN><SPAN style="FONT-FAMILY: 宋体">为在</SPAN><SPAN 
lang=EN-US>Scan</SPAN><SPAN style="FONT-FAMILY: 宋体">中成分的编号。</SPAN><SPAN 
lang=EN-US>TdNs</SPAN><SPAN style="FONT-FAMILY: 宋体">为高</SPAN><SPAN 
lang=EN-US>4</SPAN><SPAN style="FONT-FAMILY: 宋体">位，</SPAN><SPAN 
lang=EN-US>TaNs</SPAN><SPAN style="FONT-FAMILY: 宋体">为低</SPAN><SPAN 
lang=EN-US>4</SPAN><SPAN style="FONT-FAMILY: 宋体">位，分别表示</SPAN><SPAN 
lang=EN-US>DC</SPAN><SPAN style="FONT-FAMILY: 宋体">和</SPAN><SPAN 
lang=EN-US>AC</SPAN><SPAN style="FONT-FAMILY: 宋体">编码表的编号。在基本系统中</SPAN><SPAN 
lang=EN-US>Ss=0</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>Se=63</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>Ah=0</SPAN><SPAN style="FONT-FAMILY: 宋体">，</SPAN><SPAN 
lang=EN-US>Al=0</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<P style="LINE-HEIGHT: 18pt">(8)EOI(End of Image)&nbsp;&nbsp; <SPAN 
style="FONT-FAMILY: 宋体">结束标志</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">标记结构</SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">字节数</SPAN><SPAN>&nbsp;&nbsp;&nbsp; 
</SPAN><SPAN style="FONT-FAMILY: 宋体">意义</SPAN></P>
<P 
style="LINE-HEIGHT: 18pt">0XFF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P 
style="LINE-HEIGHT: 18pt">0XD9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1</P>
<P style="LINE-HEIGHT: 18pt"><B><SPAN lang=EN-US>3.<SPAN 
style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN></SPAN></B><B><SPAN lang=EN-US>JPEG</SPAN></B><B><SPAN 
style="FONT-FAMILY: 宋体">基本系统解码器的实现</SPAN><SPAN lang=EN-US></SPAN></B></P>
<P style="LINE-HEIGHT: 18pt"><SPAN style="FONT-FAMILY: 宋体">笔者曾经实现了一个</SPAN><SPAN 
lang=EN-US>Windows</SPAN><SPAN style="FONT-FAMILY: 宋体">下</SPAN><SPAN 
lang=EN-US>JPEG</SPAN><SPAN 
style="FONT-FAMILY: 宋体">基本系统的解码器，限于篇幅，这里就不给源程序了，只给出大体上的程序流程图</SPAN><SPAN 
lang=EN-US>(</SPAN><SPAN style="FONT-FAMILY: 宋体">见图</SPAN><SPAN 
lang=EN-US>9.11)</SPAN><SPAN style="FONT-FAMILY: 宋体">。</SPAN></P>
<TABLE cellSpacing=0 cellPadding=0 border=0>
  <TBODY>
  <TR>
    <TD class=Normal vAlign=bottom width=269>
      <P style="LINE-HEIGHT: 18pt"><SPAN lang=EN-US><IMG height=462 
      src="第9章 图象的压缩编码，JPEG压缩编码标准.files/image016.gif" width=246 
      v:shapes="_x0000_i1035"> </SPAN></P>
      <P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
      style="FONT-FAMILY: 宋体">图</SPAN>9.11&nbsp;&nbsp;&nbsp; JPEG</B><B><SPAN 
      style="FONT-FAMILY: 宋体">解码器的程序流程图</SPAN></B></P></TD>
    <TD class=Normal vAlign=bottom width=299>
      <P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
      lang=EN-US><IMG height=292 src="第9章 图象的压缩编码，JPEG压缩编码标准.files/image017.gif" 
      width=285 v:shapes="_x0000_i1036"> </SPAN></B></P>
      <P style="LINE-HEIGHT: 18pt; TEXT-ALIGN: center" align=center><B><SPAN 
      style="FONT-FAMILY: 宋体">图</SPAN>9.12&nbsp;&nbsp; </B><B><SPAN 
      style="FONT-FAMILY: 宋体">程序运行时的画面</SPAN><SPAN 
  lang=EN-US></SPAN></B></P></TD></TR></TBODY></TABLE>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">由于没有用到什么优化算法，该解码器的速度并不高，在用</SPAN><SPAN 
lang=EN-US>VC</SPAN><SPAN style="FONT-FAMILY: 宋体">的性能评测工具</SPAN><SPAN 
lang=EN-US>Profile</SPAN><SPAN 
style="FONT-FAMILY: 宋体">评测该程序时我发现最耗时的地方是反离散余弦变换</SPAN><SPAN 
lang=EN-US>(IDCT)</SPAN><SPAN 
style="FONT-FAMILY: 宋体">那里，其实这是显然的，浮点数的指令条数要比整数的多得多，因此采用一种快速的</SPAN><SPAN 
lang=EN-US>IDCT</SPAN><SPAN 
style="FONT-FAMILY: 宋体">算法能很大的提高性能，我这里采用是目前被认为比较好的一种快速</SPAN><SPAN 
lang=EN-US>IDCT</SPAN><SPAN style="FONT-FAMILY: 宋体">算法，其主要思想是把二维</SPAN><SPAN 
lang=EN-US>IDCT</SPAN><SPAN style="FONT-FAMILY: 宋体">分解成行和列两个一维</SPAN><SPAN 
lang=EN-US>IDCT</SPAN><SPAN style="FONT-FAMILY: 宋体">。图</SPAN><SPAN 
lang=EN-US>9.12</SPAN><SPAN style="FONT-FAMILY: 宋体">是程序运行时的画面。</SPAN></P>
<P style="LINE-HEIGHT: 18pt"><SPAN 
style="FONT-FAMILY: 宋体">源程序参见本书所附软盘。</SPAN></P></DIV>
<DIV 
style="DISPLAY: block; FONT-SIZE: 10px; FONT-FAMILY: Verdana, Geneva, Arial">The 
University of Southern California does not screen or control the content on this 
website and thus does not guarantee the accuracy, integrity, or quality of such 
content. All content on this website is provided by and is the sole 
responsibility of the person from which such content originated, and such 
content does not necessarily reflect the opinions of the University 
administration or the Board of Trustees </DIV></BODY></HTML>
